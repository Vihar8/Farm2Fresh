import{r as i,d as eo,e as k,f as z,s as v,B as ao,h as ro,i as p,m as G,k as no,l as I,j as r,n as b,o as j,p as so,q as B,t as io,M as lo,P as q,v as co,F as po,T as uo,a as H}from"./index-BzkZyVbb.js";let Y=0;function go(o){const[t,e]=i.useState(o),a=o||t;return i.useEffect(()=>{t==null&&(Y+=1,e(`mui-${Y}`))},[t]),a}const xo={...eo},_=xo.useId;function vo(o){if(_!==void 0){const t=_();return o??t}return go(o)}function fo(o){return k("MuiButton",o)}const w=z("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),bo=i.createContext({}),yo=i.createContext(void 0),mo=o=>{const{color:t,disableElevation:e,fullWidth:a,size:l,variant:s,classes:c}=o,u={root:["root",s,`${s}${p(t)}`,`size${p(l)}`,`${s}Size${p(l)}`,`color${p(t)}`,e&&"disableElevation",a&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${p(l)}`],endIcon:["icon","endIcon",`iconSize${p(l)}`]},x=j(u,fo,c);return{...c,...x}},K=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ho=v(ao,{shouldForwardProp:o=>ro(o)||o==="classes",name:"MuiButton",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.root,t[e.variant],t[`${e.variant}${p(e.color)}`],t[`size${p(e.size)}`],t[`${e.variant}Size${p(e.size)}`],e.color==="inherit"&&t.colorInherit,e.disableElevation&&t.disableElevation,e.fullWidth&&t.fullWidth]}})(G(({theme:o})=>{const t=o.palette.mode==="light"?o.palette.grey[300]:o.palette.grey[800],e=o.palette.mode==="light"?o.palette.grey.A100:o.palette.grey[700];return{...o.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(o.vars||o).shape.borderRadius,transition:o.transitions.create(["background-color","box-shadow","border-color","color"],{duration:o.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${w.disabled}`]:{color:(o.vars||o).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(o.vars||o).shadows[2],"&:hover":{boxShadow:(o.vars||o).shadows[4],"@media (hover: none)":{boxShadow:(o.vars||o).shadows[2]}},"&:active":{boxShadow:(o.vars||o).shadows[8]},[`&.${w.focusVisible}`]:{boxShadow:(o.vars||o).shadows[6]},[`&.${w.disabled}`]:{color:(o.vars||o).palette.action.disabled,boxShadow:(o.vars||o).shadows[0],backgroundColor:(o.vars||o).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${w.disabled}`]:{border:`1px solid ${(o.vars||o).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(o.palette).filter(so()).map(([a])=>({props:{color:a},style:{"--variant-textColor":(o.vars||o).palette[a].main,"--variant-outlinedColor":(o.vars||o).palette[a].main,"--variant-outlinedBorder":o.vars?`rgba(${o.vars.palette[a].mainChannel} / 0.5)`:B(o.palette[a].main,.5),"--variant-containedColor":(o.vars||o).palette[a].contrastText,"--variant-containedBg":(o.vars||o).palette[a].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(o.vars||o).palette[a].dark,"--variant-textBg":o.vars?`rgba(${o.vars.palette[a].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:B(o.palette[a].main,o.palette.action.hoverOpacity),"--variant-outlinedBorder":(o.vars||o).palette[a].main,"--variant-outlinedBg":o.vars?`rgba(${o.vars.palette[a].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:B(o.palette[a].main,o.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":o.vars?o.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":o.vars?o.vars.palette.Button.inheritContainedHoverBg:e,"--variant-textBg":o.vars?`rgba(${o.vars.palette.text.primaryChannel} / ${o.vars.palette.action.hoverOpacity})`:B(o.palette.text.primary,o.palette.action.hoverOpacity),"--variant-outlinedBg":o.vars?`rgba(${o.vars.palette.text.primaryChannel} / ${o.vars.palette.action.hoverOpacity})`:B(o.palette.text.primary,o.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:o.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:o.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:o.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:o.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:o.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:o.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${w.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${w.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),So=v("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.startIcon,t[`iconSize${p(e.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...K]}),Co=v("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.endIcon,t[`iconSize${p(e.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...K]}),X=i.forwardRef(function(t,e){const a=i.useContext(bo),l=i.useContext(yo),s=no(a,t),c=I({props:s,name:"MuiButton"}),{children:u,color:x="primary",component:f="button",className:$,disabled:n=!1,disableElevation:d=!1,disableFocusRipple:g=!1,endIcon:h,focusVisibleClassName:P,fullWidth:T=!1,size:R="medium",startIcon:D,type:S,variant:N="text",...A}=c,y={...c,color:x,component:f,disabled:n,disableElevation:d,disableFocusRipple:g,fullWidth:T,size:R,type:S,variant:N},m=mo(y),E=D&&r.jsx(So,{className:m.startIcon,ownerState:y,children:D}),M=h&&r.jsx(Co,{className:m.endIcon,ownerState:y,children:h}),U=l||"";return r.jsxs(ho,{ownerState:y,className:b(a.className,m.root,$,U),component:f,disabled:n,focusRipple:!g,focusVisibleClassName:b(m.focusVisible,P),ref:e,type:S,...A,classes:m,children:[E,u,M]})});function wo(o){return k("MuiDialog",o)}const V=z("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Q=i.createContext({}),$o=v(io,{name:"MuiDialog",slot:"Backdrop",overrides:(o,t)=>t.backdrop})({zIndex:-1}),Do=o=>{const{classes:t,scroll:e,maxWidth:a,fullWidth:l,fullScreen:s}=o,c={root:["root"],container:["container",`scroll${p(e)}`],paper:["paper",`paperScroll${p(e)}`,`paperWidth${p(String(a))}`,l&&"paperFullWidth",s&&"paperFullScreen"]};return j(c,wo,t)},Bo=v(lo,{name:"MuiDialog",slot:"Root",overridesResolver:(o,t)=>t.root})({"@media print":{position:"absolute !important"}}),ko=v("div",{name:"MuiDialog",slot:"Container",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.container,t[`scroll${p(e.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),zo=v(q,{name:"MuiDialog",slot:"Paper",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.paper,t[`scrollPaper${p(e.scroll)}`],t[`paperWidth${p(String(e.maxWidth))}`],e.fullWidth&&t.paperFullWidth,e.fullScreen&&t.paperFullScreen]}})(G(({theme:o})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:o.breakpoints.unit==="px"?Math.max(o.breakpoints.values.xs,444):`max(${o.breakpoints.values.xs}${o.breakpoints.unit}, 444px)`,[`&.${V.paperScrollBody}`]:{[o.breakpoints.down(Math.max(o.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(o.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${o.breakpoints.values[t]}${o.breakpoints.unit}`,[`&.${V.paperScrollBody}`]:{[o.breakpoints.down(o.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${V.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Io=i.forwardRef(function(t,e){const a=I({props:t,name:"MuiDialog"}),l=co(),s={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":u,"aria-modal":x=!0,BackdropComponent:f,BackdropProps:$,children:n,className:d,disableEscapeKeyDown:g=!1,fullScreen:h=!1,fullWidth:P=!1,maxWidth:T="sm",onBackdropClick:R,onClick:D,onClose:S,open:N,PaperComponent:A=q,PaperProps:y={},scroll:m="paper",TransitionComponent:E=po,transitionDuration:M=s,TransitionProps:U,...J}=a,W={...a,disableEscapeKeyDown:g,fullScreen:h,fullWidth:P,maxWidth:T,scroll:m},L=Do(W),F=i.useRef(),Z=C=>{F.current=C.target===C.currentTarget},oo=C=>{D&&D(C),F.current&&(F.current=null,R&&R(C),S&&S(C,"backdropClick"))},O=vo(u),to=i.useMemo(()=>({titleId:O}),[O]);return r.jsx(Bo,{className:b(L.root,d),closeAfterTransition:!0,components:{Backdrop:$o},componentsProps:{backdrop:{transitionDuration:M,as:f,...$}},disableEscapeKeyDown:g,onClose:S,open:N,ref:e,onClick:oo,ownerState:W,...J,children:r.jsx(E,{appear:!0,in:N,timeout:M,role:"presentation",...U,children:r.jsx(ko,{className:b(L.container),onMouseDown:Z,ownerState:W,children:r.jsx(zo,{as:A,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":O,"aria-modal":x,...y,className:b(L.paper,y.className),ownerState:W,children:r.jsx(Q.Provider,{value:to,children:n})})})})})});function jo(o){return k("MuiDialogActions",o)}z("MuiDialogActions",["root","spacing"]);const Ro=o=>{const{classes:t,disableSpacing:e}=o;return j({root:["root",!e&&"spacing"]},jo,t)},No=v("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.root,!e.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:o})=>!o.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Mo=i.forwardRef(function(t,e){const a=I({props:t,name:"MuiDialogActions"}),{className:l,disableSpacing:s=!1,...c}=a,u={...a,disableSpacing:s},x=Ro(u);return r.jsx(No,{className:b(x.root,l),ownerState:u,ref:e,...c})});function Wo(o){return k("MuiDialogContent",o)}z("MuiDialogContent",["root","dividers"]);function Po(o){return k("MuiDialogTitle",o)}const To=z("MuiDialogTitle",["root"]),Ao=o=>{const{classes:t,dividers:e}=o;return j({root:["root",e&&"dividers"]},Wo,t)},Eo=v("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.root,e.dividers&&t.dividers]}})(G(({theme:o})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(o.vars||o).palette.divider}`,borderBottom:`1px solid ${(o.vars||o).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${To.root} + &`]:{paddingTop:0}}}]}))),Uo=i.forwardRef(function(t,e){const a=I({props:t,name:"MuiDialogContent"}),{className:l,dividers:s=!1,...c}=a,u={...a,dividers:s},x=Ao(u);return r.jsx(Eo,{className:b(x.root,l),ownerState:u,ref:e,...c})}),Lo=o=>{const{classes:t}=o;return j({root:["root"]},Po,t)},Fo=v(uo,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(o,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Oo=i.forwardRef(function(t,e){const a=I({props:t,name:"MuiDialogTitle"}),{className:l,id:s,...c}=a,u=a,x=Lo(u),{titleId:f=s}=i.useContext(Q);return r.jsx(Fo,{component:"h2",className:b(x.root,l),ownerState:u,ref:e,variant:"h6",id:s??f,...c})}),Go=()=>{const[o,t]=i.useState([]),[e,a]=i.useState(!1),[l,s]=i.useState(!1),[c,u]=i.useState(null),x=async()=>{var n;a(!0);try{const d=localStorage.getItem("serviceToken");if(!d){console.error("No auth token found. Please login again.");return}const g=await H.get("/api/commodities",{headers:{Authorization:`Bearer ${d}`}});Array.isArray(g.data.commodities)?t(g.data.commodities):console.error("Unexpected response format:",g.data)}catch(d){console.error("Error fetching commodities:",((n=d.response)==null?void 0:n.data)||d.message)}finally{a(!1)}},f=async()=>{var n;if(c)try{const d=localStorage.getItem("serviceToken");if(!d){console.error("No auth token found. Please login again.");return}await H.delete(`/api/deleteCommodity/${c}`,{headers:{Authorization:`Bearer ${d}`}}),t(g=>g.filter(h=>h._id!==c))}catch(d){console.error("Error deleting commodity:",((n=d.response)==null?void 0:n.data)||d.message)}finally{s(!1)}},$=n=>{alert(`Update functionality for commodity ID: ${n} is not yet implemented.`)};return i.useEffect(()=>{x()},[]),r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsx("h1",{className:"text-3xl text-green-600 text-center font-bold mb-6",children:"My Commodities"}),o.length===0?r.jsx("p",{className:"text-gray-500 text-center",children:"No commodities found."}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:o.map(n=>r.jsxs("div",{className:"bg-white shadow-md rounded-lg border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-2 bg-gray-100 text-sm text-gray-600",children:["Date: ",new Date(n.createdAt).toLocaleDateString("en-GB")]}),r.jsx("div",{className:"relative grid grid-cols-2 gap-2 p-2 bg-gray-50",children:n.images.map((d,g)=>r.jsx("div",{className:"relative group overflow-hidden rounded-lg shadow-md",children:r.jsx("img",{src:`http://localhost:3000/${d}`,alt:`${n.commodity} image ${g+1}`,className:"w-full h-32 object-cover"})},g))}),r.jsxs("div",{className:"p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 capitalize mb-1",children:[n.commodity," (",n.varietyType,")"]}),r.jsxs("p",{className:"text-sm font-semibold text-green-700 mb-1",children:["Price: ",r.jsxs("span",{className:"text-black font-bold",children:["â‚¹",n.price]})]}),r.jsxs("p",{className:"text-sm font-semibold text-green-700",children:["Quantity: ",r.jsxs("span",{className:"text-black font-bold",children:[n.quantity," ",n.totalIn]})]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Location: ",n.state,", ",n.district]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 flex justify-between",children:[r.jsx("button",{className:"w-1/2 bg-blue-600 text-white py-2 mr-2 rounded shadow hover:bg-blue-700",onClick:()=>$(n._id),children:"Update"}),r.jsx("button",{className:"w-1/2 bg-red-600 text-white py-2 rounded shadow hover:bg-red-700",onClick:()=>{u(n._id),s(!0)},children:"Delete"})]})]},n._id))}),r.jsxs(Io,{open:l,onClose:()=>s(!1),children:[r.jsx(Oo,{children:"Confirm Deletion"}),r.jsx(Uo,{children:r.jsx("p",{children:"Are you sure you want to delete this commodity?"})}),r.jsxs(Mo,{children:[r.jsx(X,{onClick:()=>s(!1),color:"primary",children:"Cancel"}),r.jsx(X,{onClick:f,color:"secondary",children:"Confirm"})]})]})]})};export{Go as default};
